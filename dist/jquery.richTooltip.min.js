!function(t,o){var i={south:"north",north:"south",east:"west",west:"east"},e=["north","south","west","east"],n={pos:"south",arrowDirection:null,arrowStyle:"outset",closeOnWindowResize:!0,closeOnDocumentClick:!0};function s(o,i){if(t.proxyAll(this,"show","hide","toggle","pos","unhover","onWindowResize","onDocumentClick","onUiElementOpen"),this.context=t(o).addClass("rich-tooltip-context"),this.options=t.extend({},n,i||{}),this.content=t(this.options.content).eq(0).addClass("rich-tooltip-content"),0===this.content.length)throw new Error("jquery.richTooltip: failed to find desired tooltip");this.content.addClass("rich-tooltip-pos-"+this.options.pos),this.context.attr("data-rel","tooltip"),"hover"===this.options.action?(t.fn.hoverDelay?(this.context.hoverDelay(this.show,this.unhover,{delayOver:200,delayOut:500,addChildren:this.content}),this.content.hoverDelay(this.show,this.unhover,{delayOver:200,delayOut:500,addChildren:this.context})):(this.context.hover(this.show,this.unhover),this.content.hover(this.show,this.unhover)),this.context.on("press",t.proxy(function(t){"touch"===t.pointerType&&(t.preventClick(),this.toggle(t))},this))):this.context.on("click",this.toggle),this.container=this.options.container?t(this.options.container):null,this.arrow=this.content.find(".rich-tooltip-arrow"),0===this.arrow.length&&(this.arrow=t('<div class="rich-tooltip-arrow"></div>').appendTo(this.content)),this.content.on("click",'[data-rel="close"]',this.hide)}s.prototype.unhover=function(){this._clearHoverTimeout(),this.hoverTimeout=setTimeout(this.hide,250)},s.prototype._clearHoverTimeout=function(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)},s.prototype.show=function(){if(this._clearHoverTimeout(),!this.visible){var o=function(t){var o,i,e=0;if(this.length)for(;t.length&&t[0]!==document;)"absolute"!==(o=t.css("position"))&&"relative"!==o&&"fixed"!==o||(i=parseInt(t.css("zIndex"),10),isNaN(i)||0===i||i>e&&(e=i)),t=t.parent();return e}(this.content.parent());o>0&&this.content.css("z-index",o+1),this.content.parent().is("body")||this.content.appendTo("body"),t(document).trigger("ui.element.open",this),this.content.show(),this.pos(),this.visible=!0,this.context.addClass("rich-tooltip-open").trigger("richTooltip:open"),this.viewportSize={height:t(window).height(),width:t(window).width()},this.options.closeOnWindowResize&&t(window).on("resize",this.onWindowResize),this.options.closeOnDocumentClick&&t(document).on("click",this.onDocumentClick),t(document).one("ui.element.open",this.onUiElementOpen)}},s.prototype.hide=function(){this._clearHoverTimeout(),this.visible&&(this.content.hide(),this.visible=!1,this.context.removeClass("rich-tooltip-open").trigger("richTooltip:close"),this.options.closeOnWindowResize&&t(window).off("resize",this.onWindowResize),this.options.closeOnDocumentClick&&t(document).off("click",this.onDocumentClick),t(document).off("ui.element.open",this.onUiElementOpen))},s.prototype.toggle=function(t){t&&(t.preventDefault(),t.stopPropagation()),this.visible?this.hide():this.show()},s.prototype.onUiElementOpen=function(t,o){o!==this&&this.hide()},s.prototype.onWindowResize=function(){t(window).height()==this.viewportSize.height&&t(window).width()==this.viewportSize.width||this.hide()},s.prototype.onDocumentClick=function(o){var i=t(o.target);i.is(this.content)||i.isChildOf(this.content)||this.hide()};s.prototype.pos=function(){var o="inset"===this.options.arrowStyle||"none"==this.arrow.css("display")?0:15,n=t.calcRestrainedPos({giveMeSomething:!0,direction:this.options.pos,content:this.content.css("max-width","100%"),context:this.context,container:this.container,reset:{margin:0},offsets:{viewport:10,vertical:o,horizontal:o}}),s=n.pos;n.direction!==this.options.pos&&this.content.removeClass("rich-tooltip-pos-"+this.options.pos).addClass("rich-tooltip-pos-"+n.direction);var h=this.options.arrowDirection||i[n.direction];this.content.css(s),this.arrow.removeClass(e.join(" ")).addClass(h)},t.fn.tooltip=t.fn.richTooltip=function(o){var i=t(this),e=i.data("__tooltip");return e||(e=new s(i,o),i.data("__tooltip",e)),"string"==typeof o&&o in e&&e[o](),this},t.fn.isChildOf=function(o){for(var i=t(this).parents(),e=0;e<i.length;e++)if(t(i[e]).is(o))return!0;return!1},t(function(){function i(i,e){var n=i.data();return e||(e=t(n.tooltip)),{content:e,action:n.tooltipAction||"click",pos:n.tooltipPos||"south",container:n.tooltipContainer||o,arrowDirection:n.tooltipArrowDirection||null,arrowStyle:n.tooltipArrowStyle||null,closeOnWindowResize:n.tooltipIgnoreWindowResize===o,closeOnDocumentClick:n.tooltipIgnoreDocumentClick===o}}t('[data-rel="tooltip"] + aside').each(function(o,e){var n=t(e),s=n.prev();s.richTooltip(i(s,n))}),t("[data-tooltip]").each(function(o,e){(e=t(e)).richTooltip(i(e))})})}(jQuery);